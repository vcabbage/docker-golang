machine:
  services:
    - docker

dependencies:
  override:
    - pip install docker-squash
    - docker build --rm=false -t golang-intermediate .
    - docker-squash -f 11 -t vcabbage/golang golang-intermediate

test:
  override:
    - echo "test"

deployment:
  hub:
    branch: master
    commands:
      - docker login -e $DOCKER_EMAIL -u $DOCKER_USERNAME -p $DOCKER_PASSWORD
      - docker push vcabbage/golang